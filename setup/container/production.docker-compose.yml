version: "2"

# USAGE (cd to project root): docker-compose -f ./setup/<docker-compose>.yml up 
services:

  nodejs:
    build:
      # Context of docker file that will be executed.
      context: ../../
      dockerfile: ./setup/container/nodejsServer.dockerfile    
    command: nodemon --debug=5858
    # Relative to this file path, not the dockerfile context.
    volumes:
      - ../../source/:/app/source/
    ports:
      - "8084:80"
    links:
      - "apachestreamproxy:apachestreamproxy"
  
  apachestreamproxy:
    build:
      context: ../../
      dockerfile: ./setup/container/apacheStreamServer.dockerfile
    # network_mode: "host"
    ports:
      - "8085:80"
